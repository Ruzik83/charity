{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ req.full_name }} - –ó–∞–ø—Ä–æ—Å –ø–æ–º–æ—â–∏</title>
    <link rel="stylesheet" href="{% static 'css/help_detail.css' %}" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f9f9f9;
        box-sizing: border-box;
      }

      .container {
        width: 90%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      h1 {
        margin-bottom: 20px;
      }

      a {
        text-decoration: none;
        color: inherit;
      }

      .navbar {
        background-color: #2c3e50;
        padding: 10px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .navbar .logo a {
        color: #fff;
        font-size: 24px;
        font-weight: bold;
      }

      .navbar .navbar-toggler {
        display: none;
        background: none;
        border: none;
        font-size: 28px;
        color: white;
        cursor: pointer;
      }

      .navbar .nav-links {
        list-style: none;
        display: flex;
        gap: 20px;
      }

      .navbar .nav-links li a {
        color: white;
        font-size: 16px;
      }

      .navbar .nav-links li a:hover {
        color: #1c98da;
      }

      .carousel-item img,
      .carousel-item video {
        max-height: 500px;
        object-fit: contain;
      }
      .carousel {
        margin-top: 20px;
      }

      .carousel-control-prev-icon,
      .carousel-control-next-icon {
        background-color: black; /* Tugma rangi qora */
      }

      /* Tugmalarni telefon rejimida katta qilib ko'rsatish */
      @media (max-width: 767px) {
        .carousel-control-prev-icon,
        .carousel-control-next-icon {
          width: 40px;
          height: 40px;
          background-color: black;
          border-radius: 50%;
        }
      }

      /* Katta ekranlarda tugmalarni kichikroq qilish */
      @media (min-width: 768px) {
        .carousel-control-prev-icon,
        .carousel-control-next-icon {
          width: 50px;
          height: 50px;
          background-color: black;
          border-radius: 50%;
        }
      }
      footer {
        background-color: #2c3e50;
        color: white;
        padding: 20px 0;
      }

      .footer-row {
        display: flex;
        justify-content: space-between;
        padding: 0 20px;
      }

      .footer-box {
        flex: 1;
        margin: 0 10px;
      }

      .footer-box h3 {
        font-size: 1.3rem;
        margin-bottom: 10px;
      }

      .footer-box ul {
        list-style: none;
        padding: 0;
      }

      .footer-box ul li a {
        color: white;
        text-decoration: none;
        font-size: 1rem;
      }

      .footer-box ul li a:hover {
        color: #f0f0f0;
      }

      .footer-bottom {
        text-align: center;
        margin-top: 20px;
        font-size: 1rem;
      }

      @media (max-width: 768px) {
        .footer-row {
          flex-direction: column;
          align-items: center;
        }

        .footer-box {
          margin-bottom: 20px;
        }

        .navbar .nav-links {
          display: none;
          flex-direction: column;
          background-color: #333;
          position: fixed;
          top: 0;
          left: 0;
          height: 100vh;
          width: 250px;
          padding: 20px;
          z-index: 999;
        }

        .navbar .nav-links.active {
          display: flex;
          text-align: center;
        }

        .navbar .navbar-toggler {
          display: block;
          position: relative;
          z-index: 1000;
        }
      }
    </style>
    <script>
      function toggleNav() {
        const navLinks = document.querySelector(".nav-links");
        navLinks.classList.toggle("active");
      }
    </script>
  </head>
  <body>
    <header>
      <div class="navbar">
        <div class="logo">
          <a href="{% url 'home' %}">Charity</a>
        </div>
        <button type="button" class="navbar-toggler" onclick="toggleNav()">
          ‚ò∞
        </button>
        <ul class="nav-links">
          <li><a href="{% url 'home' %}">–ì–ª–∞–≤–Ω–∞—è</a></li>
          <li><a href="{% url 'help' %}">–ü–æ–º–æ—â—å</a></li>
          <li><a href="{% url 'home' %}#services">–°–µ—Ä–≤–∏—Å</a></li>
        </ul>
      </div>
    </header>

    <div class="container my-5">
      <a href="{% url 'help' %}" class="btn btn-secondary mb-4">‚¨Ö Orqaga</a>

      <div class="card shadow">
        <div class="card-body">
          <h2 class="card-title">{{ req.full_name }}</h2>
          <p class="text-muted">üìû Telefon: {{ req.phone }}</p>
          <p>{{ req.description }}</p>

          {% if req.image or req.video or media_files %}
          <div
            id="mediaCarousel"
            class="carousel slide"
            data-bs-ride="carousel"
          >
            <div class="carousel-inner">
              {% if req.image %}
              <div class="carousel-item active">
                <img
                  src="{{ req.image.url }}"
                  class="d-block w-100 rounded"
                  alt="Rasm"
                />
              </div>
              {% endif %} {% if req.video %}
              <div
                class="carousel-item {% if not req.image %}active{% endif %}"
              >
                <video class="d-block w-100 rounded" controls>
                  <source src="{{ req.video.url }}" type="video/mp4" />
                  Brauzeringiz video formatini qo‚Äòllab-quvvatlamaydi.
                </video>
              </div>
              {% endif %} {% for media in media_files %}
              <div
                class="carousel-item {% if not req.image and not req.video and forloop.first %}active{% endif %}"
              >
                {% if media.file.url|lower|slice:"-4:" == ".mp4" %}
                <video class="d-block w-100 rounded" controls>
                  <source src="{{ media.file.url }}" type="video/mp4" />
                </video>
                {% else %}
                <img
                  src="{{ media.file.url }}"
                  class="d-block w-100 rounded"
                  alt="Image"
                />
                {% endif %}
              </div>
              {% endfor %}
            </div>

            <button
              class="carousel-control-prev"
              type="button"
              data-bs-target="#mediaCarousel"
              data-bs-slide="prev"
            >
              <span
                class="carousel-control-prev-icon"
                aria-hidden="true"
              ></span>
              <span class="visually-hidden">Oldingi</span>
            </button>
            <button
              class="carousel-control-next"
              type="button"
              data-bs-target="#mediaCarousel"
              data-bs-slide="next"
            >
              <span
                class="carousel-control-next-icon"
                aria-hidden="true"
              ></span>
              <span class="visually-hidden">Keyingi</span>
            </button>
          </div>
          {% else %}
          <p class="text-muted">Fayllar mavjud emas.</p>
          {% endif %}
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <footer class="footer">
      <div class="container footer-row">
        <div class="footer-box" style="text-align: center">
          <h3>O –Ω–∞—Å</h3>
          <p>
            –ú—ã –≤–µ—Ä–∏–º –≤ –ø–æ–º–æ—â—å –æ–±—â–µ—Å—Ç–≤—É. –ú—ã –¥–µ–ª–∏–º—Å—è –ª—é–±–æ–≤—å—é –∏ –Ω–∞–¥–µ–∂–¥–æ–π —á–µ—Ä–µ–∑ –µ–¥—É,
            –æ–¥–µ–∂–¥—É –∏ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏.
          </p>
        </div>

        <div class="footer-box" style="text-align: center">
          <h3>–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏</h3>
          <ul>
            <li><a href="{% url 'home' %}">–ì–ª–∞–≤–Ω–∞—è</a></li>
            <li><a href="{% url 'home' %}#services">–°–µ—Ä–≤–∏—Å</a></li>
            <li><a href="{% url 'help' %}">–ü–æ–º–æ—â—å</a></li>
          </ul>
        </div>

        <div class="footer-box" style="text-align: center">
          <h3>–ö–æ–Ω—Ç–∞–∫—Ç</h3>
          <ul>
            <li>
              –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞:
              <a href="mailto:info@charity.org">info@charity.org</a>
            </li>
            <li>–¢–µ–ª–µ—Ñ–æ–Ω: +998 90 123 45 67</li>
            <li>–ê–¥—Ä–µ—Å: Toshkent shahri, O‚Äòzbekiston</li>
          </ul>
        </div>
      </div>

      <div class="footer-bottom">
        ¬© 2025 –ë–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
      </div>
    </footer>
  </body>
</html>
